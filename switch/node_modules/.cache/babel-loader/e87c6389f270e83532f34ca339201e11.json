{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\shirl\\\\Documents\\\\GitHub\\\\the-switch-game\\\\switch\\\\src\\\\Pages\\\\RoomPage.js\";\nimport React, { Component } from 'react';\nimport RoomListPage from './RoomListPage';\nimport './RoomPage.css';\nimport Game from './phaser/Game';\nimport { withAuthenticator } from 'aws-amplify-react';\nimport { withRouter } from 'react-router-dom';\nimport * as mutations from '../graphql/mutations';\nimport AWSAppSyncClient, { AUTH_TYPE } from 'aws-appsync';\nimport aws_config from '../aws-exports';\nimport { Auth } from 'aws-amplify';\nimport * as queries from './phaser/../../graphql/queries';\nimport Amplify, { API, graphqlOperation } from \"aws-amplify\";\n\nvar RoomPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RoomPage, _React$Component);\n\n  function RoomPage() {\n    var _this;\n\n    _classCallCheck(this, RoomPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RoomPage).call(this));\n    _this.state = {\n      showGame: false\n    };\n    _this.handleBackClick = _this.handleBackClick.bind(_assertThisInitialized(_this));\n    _this.handleStartClick = _this.handleStartClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RoomPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data = this.props.location.query;\n      console.log('data from list ' + data);\n    }\n  }, {\n    key: \"handleBackClick\",\n    value: function handleBackClick(e) {\n      e.preventDefault();\n      this.setState({\n        showGame: false\n      });\n      var data = this.props.location.query;\n      console.log('data from list ' + data);\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var getUser, name, getPlayers, list, result, count, property;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Auth.currentAuthenticatedUser();\n\n              case 2:\n                getUser = _context.sent;\n                name = getUser.username;\n                _context.next = 6;\n                return API.graphql(graphqlOperation(queries.getRoompage, {\n                  roomid: data\n                }));\n\n              case 6:\n                getPlayers = _context.sent;\n                list = getPlayers.data.getRoompage.players;\n                result = list.filter(function (players) {\n                  return players != name;\n                });\n                _context.next = 11;\n                return API.graphql(graphqlOperation(mutations.updateRoompage, {\n                  input: {\n                    roomid: data,\n                    players: result\n                  }\n                }));\n\n              case 11:\n                console.log(typeof result);\n                count = 0;\n\n                for (property in result) {\n                  if (Object.prototype.hasOwnProperty.call(result, property)) {\n                    count++;\n                  }\n                }\n\n                if (!(count == 0)) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.next = 17;\n                return API.graphql(graphqlOperation(mutations.deleteRoompage, {\n                  input: {\n                    roomid: data\n                  }\n                }));\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n\n      this.props.history.push('/room-list');\n    }\n  }, {\n    key: \"handleStartClick\",\n    value: function handleStartClick(e) {\n      e.preventDefault();\n      this.setState({\n        showGame: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"room\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"test\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"This is the room page\"), React.createElement(\"button\", {\n        onClick: this.handleBackClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Back\"), React.createElement(\"button\", {\n        onClick: this.handleStartClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Start\"), this.state.showGame ? React.createElement(Game, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return RoomPage;\n}(React.Component);\n\nexport default withRouter(withAuthenticator(RoomPage, true));","map":{"version":3,"sources":["C:\\Users\\shirl\\Documents\\GitHub\\the-switch-game\\switch\\src\\Pages\\RoomPage.js"],"names":["React","Component","RoomListPage","Game","withAuthenticator","withRouter","mutations","AWSAppSyncClient","AUTH_TYPE","aws_config","Auth","queries","Amplify","API","graphqlOperation","RoomPage","state","showGame","handleBackClick","bind","handleStartClick","data","props","location","query","console","log","e","preventDefault","setState","currentAuthenticatedUser","getUser","name","username","graphql","getRoompage","roomid","getPlayers","list","players","result","filter","updateRoompage","input","count","property","Object","prototype","hasOwnProperty","call","deleteRoompage","history","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport RoomListPage from './RoomListPage';\r\nimport './RoomPage.css';\r\nimport Game from './phaser/Game';\r\nimport { withAuthenticator } from 'aws-amplify-react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as mutations from '../graphql/mutations';\r\nimport AWSAppSyncClient, { AUTH_TYPE } from 'aws-appsync';\r\nimport aws_config from '../aws-exports';\r\nimport { Auth } from 'aws-amplify';\r\nimport * as queries from './phaser/../../graphql/queries';\r\nimport Amplify, { API, graphqlOperation } from \"aws-amplify\";\r\n\r\nclass RoomPage extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state={\r\n            showGame: false\r\n        }\r\n        this.handleBackClick = this.handleBackClick.bind(this);\r\n        this.handleStartClick = this.handleStartClick.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        const data = this.props.location.query;\r\n        console.log('data from list '+data);\r\n      \r\n    }\r\n    handleBackClick(e) {\r\n        e.preventDefault();\r\n        this.setState({\r\n            showGame: false\r\n        })\r\n        const data = this.props.location.query;\r\n        console.log('data from list '+data);\r\n        (async () => {\r\n            const getUser = await Auth.currentAuthenticatedUser();\r\n            const name = getUser.username;\r\n            const getPlayers = await API.graphql(graphqlOperation(queries.getRoompage,{\r\n                roomid : data\r\n            }));\r\n            const list = getPlayers.data.getRoompage.players;\r\n            const result = list.filter(players => players != name);\r\n            await API.graphql(graphqlOperation(mutations.updateRoompage,{\r\n                input : {\r\n                    roomid : data,\r\n                    players : result\r\n                }\r\n            }));\r\n            console.log(typeof(result));\r\n            var count=0;\r\n            for (var property in result) {\r\n                if (Object.prototype.hasOwnProperty.call(result, property)) {\r\n                    count++;\r\n                }\r\n            }\r\n            if(count == 0){\r\n                await API.graphql(graphqlOperation(mutations.deleteRoompage,{\r\n                    input:{\r\n                        roomid : data\r\n                    }\r\n                }))\r\n            }\r\n        })();\r\n        this.props.history.push('/room-list')\r\n    }\r\n\r\n    handleStartClick(e) {\r\n        \r\n        e.preventDefault();\r\n        this.setState({\r\n            showGame: true\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"room\">\r\n                <p className=\"test\">This is the room page</p>\r\n                <button onClick={this.handleBackClick}>Back</button>\r\n                <button onClick={this.handleStartClick}>Start</button>\r\n                \r\n                { this.state.showGame ? <Game /> : null }\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(withAuthenticator(RoomPage,true));\r\n\r\n"]},"metadata":{},"sourceType":"module"}