{"ast":null,"code":"import _defineProperty from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jariclnnf/the-switch-game/switch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jariclnnf/the-switch-game/switch/src/Pages/ProfilePage.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { withAuthenticator } from 'aws-amplify-react';\nimport './ProfilePage.css';\nimport { Auth } from 'aws-amplify';\nimport Validate from './FormValidation';\nimport FormErrors from \"./FormErrors\";\n\nvar ProfilePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProfilePage, _Component);\n\n  function ProfilePage() {\n    var _this;\n\n    _classCallCheck(this, ProfilePage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfilePage).call(this));\n    _this.state = {\n      oldpassword: \"\",\n      newpassword: \"\",\n      confirmpassword: \"\",\n      errors: {\n        cognito: null,\n        blankfield: false,\n        passwordmatch: false\n      }\n    };\n\n    _this.clearErrorState = function () {\n      _this.setState({\n        errors: {\n          cognito: null,\n          blankfield: false,\n          passwordmatch: false\n        }\n      });\n    };\n\n    _this.handlesubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var error, user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n\n                _this.clearErrorState();\n\n                error = Validate(event, _this.state);\n\n                if (error) {\n                  _this.setState({\n                    errors: _objectSpread({}, _this.state.eeror, error)\n                  });\n                } // AWS Cognito integration\n\n\n                _context.prev = 4;\n                _context.next = 7;\n                return Auth.currentAuthenticatedUser();\n\n              case 7:\n                user = _context.sent;\n                console.log(user);\n                _context.next = 11;\n                return Auth.changePassword(user, _this.state.oldpassword, _this.state.newpassword);\n\n              case 11:\n                _this.props.history.push(\"changepasswordconfirmation\");\n\n                _context.next = 17;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](4);\n                console.log(_context.t0);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 14]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onInputChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n\n      document.getElementById(event.target.id).classList.remove(\"is-danger\");\n    };\n\n    _this.state = {\n      name: ''\n    };\n    _this.handleBackClick = _this.handleBackClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ProfilePage, [{\n    key: \"handleBackClick\",\n    value: function handleBackClick(e) {\n      e.preventDefault();\n      this.props.history.push('/room-list');\n    }\n  }, {\n    key: \"getUserInfo\",\n    value: function getUserInfo() {\n      var _this2 = this;\n\n      Auth.currentUserInfo().then(function (userInfo) {\n        var username = userInfo.username;\n\n        _this2.setState({\n          name: username\n        });\n      });\n    } //get score info from db\n\n  }, {\n    key: \"getScore\",\n    value: function getScore() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUserInfo();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"profile-back-button\",\n        onClick: this.handleBackClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Back\"), React.createElement(\"img\", {\n        src: \"https://www.shareicon.net/download/2015/09/18/103157_man_512x512.png\",\n        alt: \"profile-img\",\n        className: \"profile-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.state.name)), React.createElement(\"p\", {\n        className: \"score\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Win: | Lost: | Presentage: |\"), React.createElement(\"div\", {\n        className: \"passwordsetting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Change Password\"), React.createElement(FormErrors, {\n        formerrors: this.state.errors,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.handlesubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"oldpassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input\",\n        type: \"password\",\n        id: \"oldpassword\",\n        placeholder: \"Old Password\",\n        value: this.state.oldpassword,\n        onChange: this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"newpassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input\",\n        type: \"password\",\n        id: \"newpassword\",\n        placeholder: \"New Password\",\n        value: this.state.newpassword,\n        onChange: this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"confirmpassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input\",\n        type: \"password\",\n        id: \"confirmpassword\",\n        placeholder: \"Confirm Paaword\",\n        value: this.state.confirmpassword,\n        onChange: this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"submitbutton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"submit\",\n        type: \"submit\",\n        id: \"submit\",\n        onClick: this.handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"test\")))));\n    }\n  }]);\n\n  return ProfilePage;\n}(Component);\n\nexport default withRouter(withAuthenticator(ProfilePage, true));","map":{"version":3,"sources":["/Users/jariclnnf/the-switch-game/switch/src/Pages/ProfilePage.js"],"names":["React","Component","withRouter","withAuthenticator","Auth","Validate","FormErrors","ProfilePage","state","oldpassword","newpassword","confirmpassword","errors","cognito","blankfield","passwordmatch","clearErrorState","setState","handlesubmit","event","preventDefault","error","eeror","currentAuthenticatedUser","user","console","log","changePassword","props","history","push","onInputChange","target","id","value","document","getElementById","classList","remove","name","handleBackClick","bind","e","currentUserInfo","then","userInfo","username","getUserInfo","handle"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { withAuthenticator } from 'aws-amplify-react';\nimport './ProfilePage.css';\nimport { Auth } from 'aws-amplify';\nimport Validate from './FormValidation'\nimport FormErrors from \"./FormErrors\";\n\nclass ProfilePage extends Component {\n  state={\n    oldpassword: \"\",\n    newpassword: \"\",\n    confirmpassword: \"\",\n    errors: {\n      cognito: null,\n      blankfield: false,\n      passwordmatch: false\n    }\n  }\n  constructor(){\n    super();\n    this.state=({\n      name: ''\n    })\n    this.handleBackClick = this.handleBackClick.bind(this);\n  }\n  clearErrorState = () => {\n    this.setState({\n      errors: {\n        cognito: null,\n        blankfield: false,\n        passwordmatch: false\n      }\n    });\n  }\n\n  handleBackClick(e) {\n    e.preventDefault();\n    this.props.history.push('/room-list');\n  }\n\n  getUserInfo() {\n    Auth.currentUserInfo().then((userInfo) => {\n      const { username } = userInfo;\n      this.setState({\n        name: username\n      });\n    });\n  }\n\n  //get score info from db\n  getScore() {\n\n  }\n\n  componentDidMount() {\n    this.getUserInfo();\n  }\n  \n  handlesubmit = async event =>{\n    event.preventDefault();\n    this.clearErrorState();\n    const error = Validate(event, this.state);\n    if(error){\n      this.setState({\n        errors:{...this.state.eeror, ...error}\n      });\n    }\n    // AWS Cognito integration\n    try {\n      const user = await Auth.currentAuthenticatedUser();\n      console.log(user);\n      await Auth.changePassword(\n        user, \n        this.state.oldpassword,\n        this.state.newpassword\n      );\n      this.props.history.push(\"changepasswordconfirmation\")\n    }\n    catch(error){\n      console.log(error)\n\n    }\n  }\n  onInputChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n    document.getElementById(event.target.id).classList.remove(\"is-danger\");\n  }\n\n  render() {\n    return (\n        <div className=\"profile\">\n          <button className=\"profile-back-button\" onClick={this.handleBackClick}>Back</button>\n                <img\n                    src=\"https://www.shareicon.net/download/2015/09/18/103157_man_512x512.png\"\n                    alt=\"profile-img\"\n                    className=\"profile-img\"\n                />\n\n                <div className=\"username\">\n                    <h1>{this.state.name}</h1>\n\n                </div>\n                <p className=\"score\">Win: | Lost: | Presentage: |</p>\n                \n                <div className=\"passwordsetting\">\n                <h1>Change Password</h1>\n                <FormErrors formerrors={this.state.errors} />\n                <form onSubmit={this.handlesubmit}>\n                <div className=\"oldpassword\">\n                <input className=\"input\" type=\"password\" id=\"oldpassword\" placeholder=\"Old Password\" value={this.state.oldpassword} onChange={this.onInputChange}></input>\n                </div>\n                <div className=\"newpassword\">\n                <input className=\"input\" type=\"password\" id=\"newpassword\" placeholder=\"New Password\" value={this.state.newpassword} onChange={this.onInputChange}></input>\n                </div>\n                <div className=\"confirmpassword\">\n                <input className=\"input\" type=\"password\" id=\"confirmpassword\" placeholder=\"Confirm Paaword\" value={this.state.confirmpassword} onChange={this.onInputChange}></input>\n                </div>\n                <div className=\"submitbutton\">\n                <button className=\"submit\" type=\"submit\" id=\"submit\" onClick={this.handle}>Submit</button>\n                <button type=\"submit\">test</button>\n                </div>\n                </form>\n                </div>\n\n        </div>\n    )\n}\n}\n\nexport default withRouter(withAuthenticator(ProfilePage,true));"]},"metadata":{},"sourceType":"module"}